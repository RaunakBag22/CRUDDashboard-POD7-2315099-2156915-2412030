# changelog.md — Project Apex: Intelligent Inventory Hub

All notable changes to this project are documented in this file. Entries are ordered newest-first. Each entry includes the git commit hash (when committed), date, and a summary of changes.

---

## Git Commit History

### `4e2811b` — 2025-06-16 — Delete requirements.md
Removed the initial hand-written `requirements.md` file from the repository (replaced later by Claude-generated `requirement.md`).

### `90559fa` — 2025-06-16 — Update requirements.md
Updated the initial requirements file content.

### `e92988b` — 2025-06-16 — Update README.md
Updated the project README with build instructions.

### `8f10e99` — 2025-06-16 — Create projectbrief.md
Added the original project brief defining the MVP vision, core user story, must-have requirements (Dashboard View, CRUD, Low-Stock Alert), and stretch goals (Charts, Images, Bulk Ops, Activity Log).

### `969d9eb` — 2025-06-13 — initial load
Initial project setup with basic repository structure.

### `60da46d` — 2025-06-13 — Initial commit
Empty repository initialisation.

---

## Claude-Generated Changes (Session: 2026-02-27)

All changes below were generated by Claude Code (claude-sonnet-4-6) in a single interactive session. They are listed in chronological order of creation. None have been committed to git yet.

---

### Mission 01 — Specification Document
**Status:** Uncommitted

Created `spec.md` from `projectbrief.md`. Full technical specification including:
- Tech stack table (React 18 + Vite, TypeScript, Tailwind CSS, Recharts)
- `Item` and `LogEntry` TypeScript interfaces
- `LOW_STOCK_THRESHOLD = 10` constant
- ASCII layout wireframe
- Feature specs for all MVP + stretch features
- Persistence strategy (`localStorage`, key: `apex_inventory`)
- 10-item seed data
- Component tree
- 10 acceptance criteria

**Files created:**
- `spec.md`

---

### Mission 02 — Repository Initialisation
**Status:** Uncommitted

Created `CLAUDE.md` guidance file for future Claude Code instances.

**Files created:**
- `CLAUDE.md`

---

### Mission 03 — Prototype Build
**Status:** Uncommitted

Scaffolded the complete React + TypeScript + Tailwind application from scratch. Attempted parallel sub-agent build (3 agents for data hook, display components, modal components) — agents were blocked by Bash permissions, so orchestrator wrote all files directly.

**Files created:**
- `package.json` — React 18, Vite 6, Tailwind v3, Recharts, ESLint 9, TypeScript
- `vite.config.ts`, `tsconfig.json`, `tsconfig.app.json`, `tsconfig.node.json`
- `tailwind.config.js`, `postcss.config.js`
- `index.html`
- `src/main.tsx`, `src/index.css`, `src/vite-env.d.ts`
- `src/types.ts` — `Item`, `LogEntry`, `ModalState`, `SortField`, `SortDirection`
- `src/data/seedData.ts` — 10 sample inventory items
- `src/hooks/useInventory.ts` — CRUD operations + localStorage persistence
- `src/components/Header.tsx`
- `src/components/StatsBar.tsx`
- `src/components/Toolbar.tsx`
- `src/components/InventoryTable.tsx`
- `src/components/TableRow.tsx`
- `src/components/ItemModal.tsx` — shared create/edit modal with validation
- `src/components/ConfirmDialog.tsx`
- `src/components/ActivityLog.tsx`
- `src/components/ChartsPanel.tsx` — Recharts bar chart

**Dependencies installed:**
- `react`, `react-dom`, `recharts` (production)
- `@vitejs/plugin-react`, `tailwindcss`, `postcss`, `autoprefixer`, `typescript`, `eslint`, etc. (dev)

---

### Mission 04 — Requirements & Plan Documents
**Status:** Uncommitted

Created formal project documentation.

**Files created:**
- `requirement.md` — 28 functional requirements (FR-01 → FR-28), 8 stretch (FR-S1 → FR-S8), 6 non-functional (NFR-01 → NFR-06)
- `plan.md` — 5 implementation phases, architecture diagrams, risk register, Definition of Done

---

### Mission 05 — Prompt Log
**Status:** Uncommitted

Created a complete prompt log documenting every prompt issued across all missions.

**Files created:**
- `prompts.md`

---

### Mission 06 — Code Review
**Status:** Uncommitted

Full code review against `requirement.md`. Found and fixed 5 bugs:

| Bug | File | Fix |
|---|---|---|
| Select-all checkbox compared count, not IDs | `InventoryTable.tsx:32` | Changed to `items.every(i => selectedIds.includes(i.id))` |
| `load()` parsed localStorage twice on mount | `useInventory.ts:34-35` | Cached result in module-level `initialData` |
| StatsBar cramped on narrow screens | `StatsBar.tsx:27` | `grid-cols-3` → `grid-cols-1 sm:grid-cols-3` |
| Missing `.gitignore` | (new file) | Added with `node_modules/`, `dist/`, IDE, OS |
| Missing ESLint config | (new file) | Added `eslint.config.js` (flat config, TS + React) |

**Files created:**
- `.gitignore`
- `eslint.config.js`

**Files modified:**
- `src/components/InventoryTable.tsx`
- `src/hooks/useInventory.ts`
- `src/components/StatsBar.tsx`

**Result:** 36/36 requirements pass. `npm run build` + `npm run lint` clean.

---

### Mission 07 — Hook Definition File
**Status:** Uncommitted

Created a canonical API reference for all custom React hooks.

**Files created:**
- `hooks.md` — return type, state, constants, helper functions, 5 method docs, side effects, dependencies, stability guarantees, usage example, data flow diagram, error handling, constraints

---

### Mission 08 — Plugin & Skill Configuration
**Status:** Uncommitted

Created Claude Code lifecycle hooks and custom slash commands.

**Files created:**
- `.claude/settings.json` — 5 lifecycle hooks (PreToolUse guard, PostToolUse auto-lint + type-check, Stop build verify, Notification + SubagentStop audit log)
- `.claude/commands/check.md` — `/check` skill
- `.claude/commands/review.md` — `/review` skill
- `.claude/commands/add-component.md` — `/add-component` skill
- `.claude/commands/add-hook.md` — `/add-hook` skill
- `.claude/commands/reset-data.md` — `/reset-data` skill
- `.claude/commands/deploy-preview.md` — `/deploy-preview` skill

---

### Mission 09 — UI Modernization
**Status:** Uncommitted

Complete visual redesign of all components for a modern, polished UI.

**Design system introduced:**
- Font: Inter (Google Fonts)
- Palette: `slate` base, `indigo`/`purple` accents, `emerald` success, `rose`/`red` danger, `amber` warning
- Gradients on header, stat cards, buttons, modals
- Custom animations: `fade-in`, `slide-up`, `scale-in`
- Backdrop blur on modals
- `rounded-2xl` cards, `rounded-xl` inputs
- Inline SVG icons (Heroicons style)
- Custom 6px scrollbar

**Files modified:**
- `index.html` — added Inter font link, `antialiased` body
- `tailwind.config.js` — added font family + animation keyframes
- `src/index.css` — custom scrollbar + glass-card utility
- `src/components/Header.tsx` — gradient navbar, SVG cube icon, hover-lift button
- `src/components/StatsBar.tsx` — gradient stat cards with SVG icons
- `src/components/Toolbar.tsx` — search icon, animated bulk-delete
- `src/components/InventoryTable.tsx` — rounded-2xl table, sort indicators, rich empty state
- `src/components/TableRow.tsx` — avatar placeholder, SKU chip, category badge, qty badge
- `src/components/ItemModal.tsx` — backdrop blur, scale-in, drag-drop image upload
- `src/components/ConfirmDialog.tsx` — centered warning icon, gradient buttons
- `src/components/ActivityLog.tsx` — timeline dots, count badge, scrollable
- `src/components/ChartsPanel.tsx` — multi-color bars, styled tooltip
- `src/App.tsx` — gradient bg, max-width, 3:2 grid, footer

---

### Mission 10 — Documentation Sync
**Status:** Uncommitted

Updated all `.md` files (except `projectbrief.md`) to reflect the modernized codebase.

**Files modified:**
- `CLAUDE.md` — status → "fully built"; added design system, hooks config, skills table
- `spec.md` — redrawn wireframe, updated feature specs with Tailwind classes, added Design System section
- `requirement.md` — added NFR-07/08/09 for modern UI; added Implementation Status section
- `plan.md` — added Inter font to stack, expanded file structure, checked Definition of Done
- `hooks.md` — updated Initial Load section (cached `initialData`)
- `prompts.md` — added Missions 06–10, updated Plugins/Hooks/Skills section

---

### Mission 11 — CSV Import Feature
**Status:** Uncommitted

Added CSV file upload for bulk product import with PapaParse parsing, per-row validation, and a 3-phase import modal (Upload → Preview → Summary).

**Dependencies added:**
- `papaparse` (production)
- `@types/papaparse` (dev)

**Files created:**
- `src/utils/csvParser.ts` — `parseCsvFile()`, `validateRows()`, `downloadTemplate()`, column alias normalization, dual SKU uniqueness check
- `src/components/CsvImportModal.tsx` — 3-phase modal (drag-drop upload, preview table with valid/invalid badges, success summary)
- `sample_import.csv` — 12 sample items for testing the import

**Files modified:**
- `src/hooks/useInventory.ts` — added `bulkAdd(dataList[])` method (single state update, single log entry)
- `src/components/Header.tsx` — added `onImportCsv` prop + "Import CSV" button (indigo/purple gradient)
- `src/App.tsx` — wired `csvImportOpen` state, `handleCsvImport` handler, `CsvImportModal` render

---

### Mission 12 — Changelog
**Status:** Uncommitted

Created this changelog file documenting all git commits and Claude-generated changes.

**Files created:**
- `changelog.md`

---

### Mission 13 — CRUD Test Suite Skill
**Status:** Uncommitted

Created a reusable `/test-crud` slash command that generates and runs a comprehensive CRUD test suite on demand in any future session.

**Files created:**
- `.claude/commands/test-crud.md` — skill definition

**Files modified:**
- `CLAUDE.md` — added `/test-crud` to custom skills table

**What `/test-crud` does when invoked:**
1. Installs Vitest + Testing Library (if not already present)
2. Creates test setup (`src/test/setup.ts`) with localStorage + crypto.randomUUID mocks
3. Generates 3 test suites:
   - `src/hooks/__tests__/useInventory.test.ts` — addItem, bulkAdd, updateItem, deleteItem, bulkDelete, clearLog, persistence, log cap
   - `src/utils/__tests__/csvParser.test.ts` — parseCsvFile, validateRows (field validation, SKU uniqueness, column aliases, missing columns)
   - `src/components/__tests__/ItemModal.test.tsx` — create/edit mode rendering, form validation, submit/cancel behaviour
4. Runs `npm run test` and reports pass/fail table
5. Updates documentation (CLAUDE.md, hooks.md, changelog.md)

---

### Mission 14 — Low Stock Toast Alerts + Excel Export
**Status:** Uncommitted

Added two features: reactive low-stock toast notifications and bulk Excel export of dashboard data.

**Dependencies added:**
- `xlsx` (SheetJS) — Excel file generation

**Files created:**
- `src/components/ToastContainer.tsx` — reactive toast notifications for out-of-stock (red) and low-stock (amber) items. Fixed to bottom-right, auto-dismiss after 6s, dismissible via X button, `animate-slide-up` entrance.
- `src/utils/excelExport.ts` — `exportToExcel(items)` generates a 2-sheet .xlsx: "Inventory" sheet (Name, SKU, Category, Price, Quantity, Status) + "Summary" sheet (totals, stock levels, inventory value, export date).

**Files modified:**
- `src/components/Toolbar.tsx` — added `onExport` prop + "Export Excel" button (download SVG icon, slate outline style)
- `src/App.tsx` — imported `ToastContainer` + `exportToExcel`, rendered `<ToastContainer items={items} />` after footer, passed `onExport={() => exportToExcel(items)}` to Toolbar

---

### Mission 15 — Dark Mode
**Status:** Uncommitted

Full dark mode implementation using Tailwind's `class` strategy with system preference detection and localStorage persistence.

**Files created:**
- `src/hooks/useTheme.ts` — `useTheme()` hook: reads system preference on first load, persists to `localStorage` key `apex_theme`, toggles `dark` class on `<html>`

**Files modified:**
- `tailwind.config.js` — added `darkMode: 'class'`
- `src/index.css` — added `dark:` body/scrollbar styles + CSS variables (`--tooltip-bg`, `--tooltip-border`, `--tooltip-color`) for chart tooltip
- `src/App.tsx` — wired `useTheme()`, passes `theme` + `onToggleTheme` to Header, dark gradient background + footer
- `src/components/Header.tsx` — added sun/moon toggle button (amber sun in dark, slate moon in light)
- `src/components/Toolbar.tsx` — dark search input, export button, bulk delete button
- `src/components/InventoryTable.tsx` — dark table container, header row, empty state, legend
- `src/components/TableRow.tsx` — dark row highlights, avatar, SKU chip, category badge, qty badge, action buttons
- `src/components/ItemModal.tsx` — dark modal bg, form inputs, labels, image upload area, buttons
- `src/components/ConfirmDialog.tsx` — dark modal bg, warning icon, text, buttons
- `src/components/ActivityLog.tsx` — dark panel bg, header, log entries, empty state
- `src/components/ChartsPanel.tsx` — dark panel bg, grid lines via CSS variables, tooltip via CSS variables
- `src/components/ToastContainer.tsx` — dark toast backgrounds and text
- `src/components/CsvImportModal.tsx` — dark modal, upload zone, preview table, summary, buttons

---

*Update this file after each git commit or Claude Code mission.*
